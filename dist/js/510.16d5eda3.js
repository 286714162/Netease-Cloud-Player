"use strict";(self["webpackChunknetease_cloud_player"]=self["webpackChunknetease_cloud_player"]||[]).push([[510],{1926:function(e,t,s){s.d(t,{Z:function(){return u}});var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",{staticClass:"sub-tabs"},e._l(e.sourceData.list,(function(t,a){return s("li",{key:"tabs"+a,on:{click:function(s){return e.tabsChange(t.title)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.tabsChecked,expression:"tabsChecked"}],attrs:{type:"radio",id:t.id,name:e.sourceData.name},domProps:{value:t.title,checked:e._q(e.tabsChecked,t.title)},on:{change:function(s){e.tabsChecked=t.title}}}),s("label",{attrs:{for:t.id}},[e._v(e._s(t.title))])])})),0)},i=[],o={name:"SubTabs",data(){return{tabsChecked:""}},props:["sourceData"],mounted(){this.tabsChecked=this.$props.sourceData.checked},methods:{tabsChange(e){this.$emit("change",e)}}},r=o,l=s(1001),n=(0,l.Z)(r,a,i,!1,null,"3540476e",null),u=n.exports},8510:function(e,t,s){s.r(t),s.d(t,{default:function(){return Z}});var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{style:{"--color-playlist":e.$store.state.curPlaylistColor},attrs:{id:"layout-default"}},[s("header",[s("nav",[e._m(0),s("SubTabs",{attrs:{sourceData:e.config.homeTabsData},on:{change:e.homeTabsChange}}),s("div",{staticClass:"avatar"},[s("img",{attrs:{src:e.$store.getters.userInfo.profile.avatarUrl,alt:""}})])],1),s("div",{ref:"main-header-mask",staticClass:"header-mask"})]),e.$store.state.loading?s("TheLoading"):e._e(),s("TheTips"),s("router-view",{directives:[{name:"show",rawName:"v-show",value:!e.$store.state.loading,expression:"!$store.state.loading"}]}),s("PlayerAudio")],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"logo"},[a("img",{attrs:{src:s(4706),alt:""}})])}],o=s(1926),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"audioPlayerWrap"}},[s("div",{staticClass:"player-main"},[s("div",{ref:"player-progress",staticClass:"player-progress",class:{"player-seeking":e.audioSeeking}},[s("span",{staticClass:"player-progress-hover-tips",style:{left:e.mouseMoveX+"px"}},[e._v(e._s(e.currentTimeFormat)+" ")]),s("div",{staticClass:"player-progress-rail"},[s("div",{staticClass:"player-progress-cache",style:{transform:"translateX(-"+(100-e.getCacheProgress)+"%)"}}),s("div",{staticClass:"player-progress-bg",class:{"player-progress-bg-animate":!e.audioSeeking},style:{transform:"translateX(-"+(100-e.getPlayProgress)+"%)"}},[s("div",{staticClass:"player-progress-point"})])])]),s("div",{staticClass:"player-song"},[s("div",{staticClass:"player-song-pic"},[e.loading?s("TheLoadingCircle",{staticClass:"pic-loading"}):s("img",{attrs:{src:e.curSongPic,alt:""}})],1),s("div",{staticClass:"player-song-desc"},[s("p",{attrs:{title:e.curSongName}},[e._v(" "+e._s(e.loading?"正在加载...":e.curSongName)+" ")]),e.loading?s("p",[e._v(" ")]):s("p",{attrs:{title:e.curSongArtists+(e.curSongPubtime?" • ":"")+e.curSongPubtime}},[e._v(" "+e._s(e.curSongArtists)+" "),e.curSongPubtime?s("span",[e._v(" • ")]):e._e(),e._v(" "+e._s(e.curSongPubtime)+" ")])])]),s("div",{staticClass:"player-controls"},[s("div",{staticClass:"player-controls-left"},[s("button",{class:{"random-play":e.random},on:{click:e.randomPlay}},[s("svg",{attrs:{role:"img",height:"16",width:"16",viewBox:"0 0 16 16"}},[s("path",{attrs:{d:"M13.151.922a.75.75 0 10-1.06 1.06L13.109 3H11.16a3.75 3.75 0 00-2.873 1.34l-6.173 7.356A2.25 2.25 0 01.39 12.5H0V14h.391a3.75 3.75 0 002.873-1.34l6.173-7.356a2.25 2.25 0 011.724-.804h1.947l-1.017 1.018a.75.75 0 001.06 1.06L15.98 3.75 13.15.922zM.391 3.5H0V2h.391c1.109 0 2.16.49 2.873 1.34L4.89 5.277l-.979 1.167-1.796-2.14A2.25 2.25 0 00.39 3.5z"}}),s("path",{attrs:{d:"M7.5 10.723l.98-1.167.957 1.14a2.25 2.25 0 001.724.804h1.947l-1.017-1.018a.75.75 0 111.06-1.06l2.829 2.828-2.829 2.828a.75.75 0 11-1.06-1.06L13.109 13H11.16a3.75 3.75 0 01-2.873-1.34l-.787-.938z"}})])]),s("button",{on:{click:e.prev}},[s("svg",{staticClass:"Svg-sc-1bi12j5-0 hDgDGI",attrs:{role:"img",height:"16",width:"16",viewBox:"0 0 16 16"}},[s("path",{attrs:{d:"M3.3 1a.7.7 0 01.7.7v5.15l9.95-5.744a.7.7 0 011.05.606v12.575a.7.7 0 01-1.05.607L4 9.149V14.3a.7.7 0 01-.7.7H1.7a.7.7 0 01-.7-.7V1.7a.7.7 0 01.7-.7h1.6z"}})])])]),s("div",{staticClass:"player-controls-center"},[s("button",{attrs:{title:"播放/暂停",disabled:e.loading},on:{click:e.audioPlay}},[e.getPlayStatus?s("svg",{attrs:{role:"img",height:"16",width:"16",viewBox:"0 0 16 16"}},[s("path",{attrs:{d:"M2.7 1a.7.7 0 00-.7.7v12.6a.7.7 0 00.7.7h2.6a.7.7 0 00.7-.7V1.7a.7.7 0 00-.7-.7H2.7zm8 0a.7.7 0 00-.7.7v12.6a.7.7 0 00.7.7h2.6a.7.7 0 00.7-.7V1.7a.7.7 0 00-.7-.7h-2.6z"}})]):s("svg",{attrs:{role:"img",height:"16",width:"16",viewBox:"0 0 16 16"}},[s("path",{attrs:{d:"M3 1.713a.7.7 0 011.05-.607l10.89 6.288a.7.7 0 010 1.212L4.05 14.894A.7.7 0 013 14.288V1.713z"}})])])]),s("div",{staticClass:"player-controls-right"},[s("button",{staticStyle:{"--button-size":"32px"},on:{click:e.next}},[s("svg",{attrs:{role:"img",height:"16",width:"16",viewBox:"0 0 16 16"}},[s("path",{attrs:{d:"M12.7 1a.7.7 0 00-.7.7v5.15L2.05 1.107A.7.7 0 001 1.712v12.575a.7.7 0 001.05.607L12 9.149V14.3a.7.7 0 00.7.7h1.6a.7.7 0 00.7-.7V1.7a.7.7 0 00-.7-.7h-1.6z"}})])]),s("button",{class:"control-button-"+e.audioPlayType,on:{click:e.audioPlayTypeSwitch}},[["common","list"].includes(e.audioPlayType)?s("svg",{attrs:{role:"img",height:"16",width:"16",viewBox:"0 0 16 16"}},[s("path",{attrs:{d:"M0 4.75A3.75 3.75 0 013.75 1h8.5A3.75 3.75 0 0116 4.75v5a3.75 3.75 0 01-3.75 3.75H9.81l1.018 1.018a.75.75 0 11-1.06 1.06L6.939 12.75l2.829-2.828a.75.75 0 111.06 1.06L9.811 12h2.439a2.25 2.25 0 002.25-2.25v-5a2.25 2.25 0 00-2.25-2.25h-8.5A2.25 2.25 0 001.5 4.75v5A2.25 2.25 0 003.75 12H5v1.5H3.75A3.75 3.75 0 010 9.75v-5z"}})]):s("svg",{attrs:{role:"img",height:"16",width:"16",viewBox:"0 0 16 16"}},[s("path",{attrs:{d:"M0 4.75A3.75 3.75 0 013.75 1h.75v1.5h-.75A2.25 2.25 0 001.5 4.75v5A2.25 2.25 0 003.75 12H5v1.5H3.75A3.75 3.75 0 010 9.75v-5zM12.25 2.5h-.75V1h.75A3.75 3.75 0 0116 4.75v5a3.75 3.75 0 01-3.75 3.75H9.81l1.018 1.018a.75.75 0 11-1.06 1.06L6.939 12.75l2.829-2.828a.75.75 0 111.06 1.06L9.811 12h2.439a2.25 2.25 0 002.25-2.25v-5a2.25 2.25 0 00-2.25-2.25z"}}),s("path",{attrs:{d:"M9.12 8V1H7.787c-.128.72-.76 1.293-1.787 1.313V3.36h1.57V8h1.55z"}})])])])]),s("PlayerAudioVolume",{on:{"volume-change":e.updateVolume}})],1)])},l=[],n=s(7133),u=s.n(n),d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"player-volume"},[s("div",{staticClass:"btn-row"},[s("button",{staticClass:"play-queue",class:{"play-queue-open":e.$store.state.playQueueStatus},attrs:{title:"播放队列"},on:{click:e.toPlayQueue}},[s("svg",{attrs:{role:"img",height:"16",width:"16",viewBox:"0 0 16 16"}},[s("path",{attrs:{d:"M15 15H1v-1.5h14V15zm0-4.5H1V9h14v1.5zm-14-7A2.5 2.5 0 013.5 1h9a2.5 2.5 0 010 5h-9A2.5 2.5 0 011 3.5zm2.5-1a1 1 0 000 2h9a1 1 0 100-2h-9z"}})])]),s("button",{staticClass:"switch-volume",attrs:{title:"静音"},on:{click:e.switchVolume}},[0===e.volumeProgress?s("svg",{attrs:{role:"presentation",height:"16",width:"16","aria-label":"Volume off",id:"volume-icon",viewBox:"0 0 16 16"}},[s("path",{attrs:{d:"M13.86 5.47a.75.75 0 00-1.061 0l-1.47 1.47-1.47-1.47A.75.75 0 008.8 6.53L10.269 8l-1.47 1.47a.75.75 0 101.06 1.06l1.47-1.47 1.47 1.47a.75.75 0 001.06-1.06L12.39 8l1.47-1.47a.75.75 0 000-1.06z"}}),s("path",{attrs:{d:"M10.116 1.5A.75.75 0 008.991.85l-6.925 4a3.642 3.642 0 00-1.33 4.967 3.639 3.639 0 001.33 1.332l6.925 4a.75.75 0 001.125-.649v-1.906a4.73 4.73 0 01-1.5-.694v1.3L2.817 9.852a2.141 2.141 0 01-.781-2.92c.187-.324.456-.594.78-.782l5.8-3.35v1.3c.45-.313.956-.55 1.5-.694V1.5z"}})]):e.volumeProgress<=25?s("svg",{attrs:{role:"presentation",height:"16",width:"16","aria-label":"Volume low",id:"volume-icon",viewBox:"0 0 16 16"}},[s("path",{attrs:{d:"M9.741.85a.75.75 0 01.375.65v13a.75.75 0 01-1.125.65l-6.925-4a3.642 3.642 0 01-1.33-4.967 3.639 3.639 0 011.33-1.332l6.925-4a.75.75 0 01.75 0zm-6.924 5.3a2.139 2.139 0 000 3.7l5.8 3.35V2.8l-5.8 3.35zm8.683 4.29V5.56a2.75 2.75 0 010 4.88z"}})]):e.volumeProgress<=75?s("svg",{attrs:{role:"presentation",height:"16",width:"16","aria-label":"Volume medium",id:"volume-icon",viewBox:"0 0 16 16"}},[s("path",{attrs:{d:"M9.741.85a.75.75 0 01.375.65v13a.75.75 0 01-1.125.65l-6.925-4a3.642 3.642 0 01-1.33-4.967 3.639 3.639 0 011.33-1.332l6.925-4a.75.75 0 01.75 0zm-6.924 5.3a2.139 2.139 0 000 3.7l5.8 3.35V2.8l-5.8 3.35zm8.683 6.087a4.502 4.502 0 000-8.474v1.65a2.999 2.999 0 010 5.175v1.649z"}})]):s("svg",{attrs:{role:"presentation",height:"16",width:"16","aria-label":"Volume high",id:"volume-icon",viewBox:"0 0 16 16"}},[s("path",{attrs:{d:"M9.741.85a.75.75 0 01.375.65v13a.75.75 0 01-1.125.65l-6.925-4a3.642 3.642 0 01-1.33-4.967 3.639 3.639 0 011.33-1.332l6.925-4a.75.75 0 01.75 0zm-6.924 5.3a2.139 2.139 0 000 3.7l5.8 3.35V2.8l-5.8 3.35zm8.683 4.29V5.56a2.75 2.75 0 010 4.88z"}}),s("path",{attrs:{d:"M11.5 13.614a5.752 5.752 0 000-11.228v1.55a4.252 4.252 0 010 8.127v1.55z"}})])])]),s("div",{ref:"player-volume-progress",staticClass:"player-volume-progress"},[s("div",{staticClass:"player-volume-point",style:{transform:"translateX("+e.getVolumeProgress+")"}}),s("div",{staticClass:"player-progress-bg"},[s("div",{staticClass:"player-progress-fg",style:{transform:"translateX("+e.getVolumeProgress+")"}})])])])},h=[],c={name:"PlayerAudioVolume",data(){return{volumeProgress:localStorage.getItem("volumeProgress")||50}},mounted(){const e=this.$refs["player-volume-progress"],t=t=>{let s=t.clientX-e.offsetLeft;s<=0?s=0:s>=100&&(s=100),this.updateVolume(s)},s=e=>{t(e),document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",s)};e.addEventListener("mousedown",(()=>{document.addEventListener("mousemove",t),document.addEventListener("mouseup",s)})),this.$emit("volume-change",this.volumeProgress/100)},methods:{switchVolume(){this.volumeProgress>0?this.volumeProgress=0:this.volumeProgress=localStorage.getItem("volumeProgress")||50},updateVolume(e){this.volumeProgress!==e&&this.$emit("volume-change",e/100),localStorage.setItem("volumeProgress",e),this.volumeProgress=e},toPlayQueue(){this.$store.state.playQueueStatus?this.$router.go(-1):this.$router.push({name:"playqueue"})}},computed:{getVolumeProgress(){return this.volumeProgress-100+"px"}}},m=c,g=s(1001),p=(0,g.Z)(m,d,h,!1,null,"56d67cda",null),v=p.exports,f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"circle-loading"},[s("div",{staticClass:"circle-spinner"},[s("svg",{staticClass:"circular",attrs:{viewBox:"25 25 50 50"}},[s("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none","stroke-width":"2","stroke-miterlimit":"10"}})])])])},y=[],S={name:"circle-Loading"},P=S,b=(0,g.Z)(P,f,y,!1,null,"d8b3d36a",null),T=b.exports,C=s(4665),L=s(2536),w={name:"PlayerAudio",components:{PlayerAudioVolume:v,TheLoadingCircle:T},data(){return{loading:!1,audioPlayType:"common",currentTimeFormat:"",mouseMoveProgress:"",mouseMoveX:"",progress:"",audioLength:"",cacheProgress:"",audioRef:"",audioSeeking:!1,volumeProgress:0,playStatus:!1,currentTime:"",curSongInfo:{name:"",picUrl:"",artists:"",publishTime:""},errorNum:0,random:!1}},methods:{...(0,C.Se)(["playQueue","playQueueIndex"]),...(0,C.nv)(["getSongDetail","getSongUrl"]),...(0,C.OI)(["setCurSongid","setCurSongurlInfo","setTips"]),createAudio(e,t){localStorage.removeItem("audioLength"),localStorage.removeItem("currentTime"),this.audioRef.autoplay=t,this.audioRef.src=e,this.audioRef.load()},audioPlay(){this.playStatus?(this.playStatus=!1,this.audioRef.pause()):(this.playStatus=!0,this.audioRef.play())},updateVolume(e){"undefined"!==typeof e&&(this.audioRef.volume=e)},audioPlayTypeSwitch(){"common"===this.audioPlayType?(this.audioPlayType="list",this.audioRef.loop=!1,this.setTips("列表循环播放")):"list"===this.audioPlayType?(this.audioPlayType="repeat",this.audioRef.loop=!0,this.setTips("单曲播放")):"repeat"===this.audioPlayType&&(this.audioPlayType="common",this.audioRef.loop=!1,this.setTips("列表播放"))},idToUrl(e,t){this.getSongDetail(e).then((s=>{const a=s.songs[0],i={name:a.name,picUrl:a.al.picUrl,artists:a.ar,publishTime:a.publishTime};Object.keys(i).forEach((e=>{this.curSongInfo[e]=i[e]})),localStorage.setItem("curSongInfo",JSON.stringify(i)),this.getSongUrl(e).then((e=>{this.createAudio(e.data[0].url,t)}))}))},next(){const e=this.playQueue(),t=this.playQueueIndex();if(this.random){function s(){const a=this.getRandomIndex(e.length-1);if(a!==t)return a;s()}const a=s.call(this);this.setCurSongid(e[a].id)}else{const i=t===e.length-1?0:t+1;this.setCurSongid(e[i].id)}},prev(){const e=this.playQueue(),t=this.playQueueIndex(),s=0===t?e.length-1:t-1;this.setCurSongid(e[s].id)},randomPlay(){this.random=!this.random,this.setTips(this.random?"开启随机播放":"关闭随机播放")},getRandomIndex(e){return Math.floor(Math.random()*(e+1))}},created(){this.audioRef=document.createElement("audio"),this.audioRef.controls="controls",this.audioRef.preload="auto",this.audioRef.loop=!1,this.audioRef.currentTime=localStorage.getItem("currentTime")||0,this.audioLength=localStorage.getItem("audioLength"),this.progress=this.audioRef.currentTime/this.audioLength*100,this.audioRef.addEventListener("error",(t=>{this.audioRef.pause(),this.loading=!0,0===this.errorNum?(this.errorNum=1,setTimeout((()=>{this.idToUrl(e,!0)}),3e3)):console.error(t,"玩了，芭比Q了.直接刷新页面吧")})),this.audioRef.addEventListener("canplay",(()=>{this.errorNum=0,this.loading=!1})),this.audioRef.addEventListener("play",(e=>{this.playStatus=!0,console.log("触发开始")})),this.audioRef.addEventListener("pause",(e=>{this.playStatus=!1,console.log("触发暂停")})),this.audioRef.addEventListener("durationchange",(e=>{this.audioLength=this.audioRef.duration,localStorage.setItem("audioLength",this.audioLength)})),this.audioRef.addEventListener("progress",(e=>{let t=0;for(let s=0;s<this.audioRef.buffered.length;s++)t+=this.audioRef.buffered.end(s)-this.audioRef.buffered.start(s);this.cacheProgress=t/this.audioLength*100})),this.audioRef.addEventListener("timeupdate",(e=>{this.progress=this.audioRef.currentTime/this.audioLength*100,localStorage.setItem("currentTime",this.audioRef.currentTime)})),this.audioRef.addEventListener("ended",(e=>{if("list"===this.audioPlayType)this.next();else if("repeat"===this.audioPlayType)this.audioRef.currentTime=0;else{const e=this.playQueue(),t=this.playQueueIndex();t!==e.length-1&&this.next()}})),this.audioRef.addEventListener("stalled",(e=>{console.log("stalled",e)})),this.audioRef.addEventListener("waiting",(e=>{console.log("waiting",e)})),this.volumeProgress=localStorage.getItem("volumeProgress")||50,this.volumeProgress&&this.updateVolume();const e=localStorage.getItem("songid");e&&this.idToUrl(e,!1);const t=localStorage.getItem("curSongInfo");t&&Object.keys(JSON.parse(t)).forEach((e=>{this.curSongInfo[e]=t[e]}))},mounted(){const e=this.$refs["player-progress"],t=t=>{let s=t.clientX/e.offsetWidth*100;s<=1?s=0:s>=99&&(s=100);const a=u().duration(this.audioLength*(s/100),"seconds");this.currentTimeFormat=`${a.minutes()<10?`0${a.minutes()}`:a.minutes()}:${a.seconds()<10?`0${a.seconds()}`:a.seconds()}`;let i=t.clientX;const o=30,r=e.offsetWidth-30;i<o?i=o:i>r&&(i=r),this.mouseMoveX=i},s=t=>{const s=t.clientX/e.offsetWidth,a=this.audioLength*s;this.audioRef.currentTime=a};e.addEventListener("mousemove",t);const a=e=>{t(e),s(e)};e.addEventListener("mousedown",(()=>{const e=!!this.audioRef.paused,t=i=>{s(i),document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",t),this.audioSeeking=!1,this.audioRef.muted=!1,e||this.audioRef.play()};this.audioSeeking=!0,this.audioRef.muted=!0,this.audioRef.pause(),document.addEventListener("mousemove",a),document.addEventListener("mouseup",t)}))},computed:{getVolumeProgress(){return this.volumeProgress-100+"px"},getPlayStatus(){return this.playStatus},getPlayProgress(){return this.progress},getCacheProgress(){return this.cacheProgress},curSongName(){return this.curSongInfo.name||""},curSongPic(){return this.curSongInfo.picUrl||""},curSongArtists(){return(0,L.cx)(this.curSongInfo.artists)??null},curSongPubtime(){const e=this.curSongInfo.publishTime;return e&&u()(e).format("YYYY")||""}},watch:{"$store.getters.curSongid":{handler(e){e&&(localStorage.setItem("songid",e),this.idToUrl(e,!0),this.audioRef.pause(),this.loading=!0)}}}},_=w,R=(0,g.Z)(_,r,l,!1,null,null,null),x=R.exports,V=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},k=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"g-loading"},[s("div")])}],I={name:"G-Loading"},E=I,$=(0,g.Z)(E,V,k,!1,null,"cf9ed792",null),z=$.exports,A=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"fade"}},[e.isShow?s("div",{staticClass:"tips"},[e._v(" "+e._s(e.$store.state.tips)+" ")]):e._e()])},M=[],H={name:"TheTips",data(){return{isShow:!1,timer:void 0}},methods:{...(0,C.OI)(["setTips"])},watch:{"$store.state.tips":{handler(e){console.log(this.timer),this.setTips(e),this.isShow=!0,this.timer&&(clearTimeout(this.timer),this.timer=void 0),this.timer=setTimeout((()=>{this.isShow=!1}),2e3)}}}},B=H,Q=(0,g.Z)(B,A,M,!1,null,"304edb7b",null),D=Q.exports,N={name:"LayoutDefault",components:{SubTabs:o.Z,TheLoading:z,PlayerAudio:x,TheTips:D},created(){this.$store.commit("reset")},data(){return{config:{homeTabsData:{name:"home",checked:"首页",list:[{id:"home-tabs-tj",title:"首页"},{id:"home-tabs-rm",title:"探索"},{id:"home-tabs-xj",title:"媒体库"},{id:"home-tabs-zb",title:"搜索"}]}}}},methods:{homeTabsChange(e){const t={"首页":"home","探索":"discovery"};this.$router.push({name:t[e]})}},computed:{getPickupName(){return function(e,t="/"){return e?(0,L.cx)(e,t):""}},getPubTime(){return function(e){return e?u()(e).format("YYYY"):""}}}},U=N,X=(0,g.Z)(U,a,i,!1,null,null,null),Z=X.exports},4706:function(e,t,s){e.exports=s.p+"img/logo_a.91bfbb5b.png"}}]);
//# sourceMappingURL=510.16d5eda3.js.map
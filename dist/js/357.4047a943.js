"use strict";(self["webpackChunknetease_cloud_player"]=self["webpackChunknetease_cloud_player"]||[]).push([[357],{9357:function(t,s,e){e.r(s),e.d(s,{default:function(){return w}});var a=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("main",{attrs:{id:"artist"}},[a("div",{ref:"under-poster",staticClass:"under-poster",style:{"--poster-url":t.artistnPoster}}),a("div",{staticClass:"under-poster-mask"}),a("div",{ref:"under-poster-mask-trans",staticClass:"under-poster-mask-trans"}),a("div",{staticClass:"artist-info"},[a("div",{staticClass:"artist-info-spacing"},[a("div",{staticClass:"artist-info-main"},[a("span",{staticClass:"artist-info-type"},[t._v("入住艺人")]),a("span",{staticClass:"artist-info-name"},[t._v(t._s(t.artistnName))]),a("span",{staticClass:"artist-info-follower"},[t._v("每月有 1,148,445 名听众")])])])]),a("div",{staticClass:"artist-playlist"},[a("div",{staticClass:"artist-playlist-main"},[a("section",{staticClass:"section-hot-song"},[a("h2",[t._v("热门")]),a("ul",{staticClass:"hot-song-table"},t._l(t.tableData.hotSongs,(function(s,i){return a("li",{key:"detailArtist-"+i,staticClass:"table-row"},[a("div",{staticClass:"table-cell-index"},[a("span",{staticClass:"playlist-table-index"},[t._v(" "+t._s(i+1))]),a("span",{staticClass:"playlist-table-icon"},[a("svg",{staticClass:"icon-play",attrs:{height:"32",role:"img",width:"32",viewBox:"0 0 24 24"}},[a("polygon",{attrs:{points:"21.57 12 5.98 3 5.98 21 21.57 12",fill:"currentColor"}})])])]),a("div",{staticClass:"table-cell-desc"},[a("img",{staticClass:"table-cell-desc-pic",attrs:{src:s.al.picUrl,alt:""}}),a("div",{staticClass:"table-cell-desc-info"},[a("div",{staticClass:"table-desc-name"},[a("span",{staticClass:"table-cell-ellipsis",attrs:{title:s.name}},[t._v(" "+t._s(s.name))]),[0,8].includes(s.fee)?t._e():a("img",{staticClass:"table-cell-desc-vip",attrs:{src:e(7788),alt:""}})])])]),a("div",{staticClass:"table-cell-ellipsis"},[a("div",{staticClass:"table-cell-ellipsis",staticStyle:{display:"block"},attrs:{title:s.al.name}},[t._v(" "+t._s(s.al.name)+" ")])]),a("div",[t._v(t._s(t.getSongDt(s.dt)))])])})),0),a("a",{staticClass:"more-hotSongs",attrs:{href:"#"}},[t._v("查看更多")])]),a("SectionList",{attrs:{title:"专辑",listData:t.tableData.hotAlbums}}),a("SectionList",{attrs:{title:"MV",listData:t.tableData.mvs}}),a("SectionList",{attrs:{title:"粉丝也喜欢",round:!0,listData:t.tableData.simi}})],1)])])},i=[],n=e(7133),l=e.n(n),r=e(2536),o=e(4665),c=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("section",{staticClass:"section-common",style:{"--shape-round":t.$props.round?"50%":"4px"}},[a("div",{staticClass:"section-common-title"},[a("h2",[t._v(t._s(t.getTitle))]),t.$props.listData.length>6?a("span",[t._v("查看更多")]):t._e()]),a("ul",{staticClass:"section-row"},t._l(t.getListData,(function(s,i){return a("li",{key:t.getTitle+"-"+i,ref:"lazyload-img",refInFor:!0,staticClass:"section-column"},[a("div",{staticClass:"section-column-spacing"},[a("img",{ref:"lazyload-img",refInFor:!0,staticClass:"column-poster",attrs:{src:e(2564),"data-pic-src":s.picUrl,alt:""}}),a("div",{staticClass:"column-info"},[a("div",{staticClass:"column-name"},[t._v(" "+t._s(s.name)+" ")]),a("div",{staticClass:"column-desc"},[t._v(" "+t._s(s.desc)+" ")])])])])})),0)])},d=[],h={name:"SectionList",data(){return{columnCount:6}},props:["title","listData","round"],mounted(){const t={"(min-width: 1068px)":6,"(min-width: 968px)":5,"(min-width: 728px)":4,"(min-width: 528px)":3,"(min-width: 0)":2},s=s=>{!0===s.matches?this.columnCount=t[s.media]:this.columnCount=t[s.media]-1};let e=!1;Object.keys(t).reverse().forEach((a=>{const i=window.matchMedia(a);i.matches||e||(this.columnCount=t[a]-1,e=!0),i.addEventListener("change",s)}))},methods:{lazyLoadimg(){const t=new IntersectionObserver((s=>{s.forEach((s=>{if(s.intersectionRatio>0){const e=.2,a=new Image;a.setAttribute("crossOrigin","Anonymous"),a.src=s.target.getAttribute("data-pic-src"),console.dir(a),a.onload=function(){const t=a.width,i=a.height;let n,l;t/i>1?n=l=i:t/i<1?n=l=t:(n=t,l=i);const r=document.createElement("canvas"),o=r.getContext("2d");r.width=n*e,r.height=l*e,o.drawImage(a,0,0,t,i,0,0,n*e,l*e),s.target.src=r.toDataURL("image/jpg")},t.unobserve(s.target)}}))}));this.$nextTick((function(){this.$refs["lazyload-img"].forEach((s=>{s&&t.observe(s)}))}))}},computed:{getTitle(){return this.$props.title||""},getListData(){return this.$props.listData&&this.$props.listData.length>0?(this.lazyLoadimg(),this.$props.listData.slice(0,this.columnCount)):[]}}},u=h,m=e(1001),p=(0,m.Z)(u,c,d,!1,null,"5a1966ee",null),g=p.exports;const C={artistPlaylistRef:void 0,headerMaskRef:void 0,MaskTransRef:void 0,underPosterRef:void 0},f=()=>{const t=C.artistPlaylistRef.offsetTop-68,s=document.documentElement.scrollTop;if(t<0)return;let e;e=t>s?1-(t-s)/t:1,e=e.toFixed(3),C.underPosterRef.style.transform=`scale(${1.05-.05*e})`,C.MaskTransRef.style.opacity=1.5*e>1?1:1.5*e,C.headerMaskRef.style.opacity=e},A=(0,r.P2)(f,1e3/60);var v={name:"DetailArtist",components:{SectionList:g},data(){return{...(0,o.OI)(["setLoading","setCurPlaylistColor"]),...(0,o.nv)(["getArtistDetail","getArtistFans","getArtistSong","getArtistALBUM","getArtistMV","getArtistSimi"]),tableData:{hotSongs:[],hotAlbums:[],mvs:[],simi:[]},artistInfo:{}}},mounted(){C.artistPlaylistRef=document.querySelector(".artist-playlist"),C.headerMaskRef=this.$parent.$refs["main-header-mask"],C.MaskTransRef=this.$refs["under-poster-mask-trans"],C.underPosterRef=this.$refs["under-poster"],this.setLoading(!0);const{id:t}=this.$route.query;this.getArtistDetail(t).then((async s=>{const e=await(0,r.NT)(s.data.artist.cover);this.setCurPlaylistColor(e),this.$nextTick((()=>{Promise.all([this.getArtistSimi(t),this.getArtistSong(t),this.getArtistALBUM(t),this.getArtistMV(t)]).then((t=>{this.artistInfo=s.data,t.forEach((t=>{this.tableData[t.type]=t.data})),this.setLoading(!1)}))}))})),document.addEventListener("scroll",A)},computed:{artistType(){return this.artistInfo?.artist?this.artistInfo.artist.identifyTag[0]:""},artistnName(){return this.artistInfo.artist?.name||""},artistnPoster(){return`url(${this.artistInfo.artist?.cover||""})`},getSongDt(){return function(t){const s=l().duration(t);return`${s.minutes()<10?`0${s.minutes()}`:s.minutes()}:${s.seconds()<10?`0${s.seconds()}`:s.seconds()}`}}},beforeRouteLeave(t,s,e){document.removeEventListener("scroll",A),this.setCurPlaylistColor("0, 0, 0, 1"),this.setLoading(!0),this.$nextTick((()=>{e()}))}},y=v,k=(0,m.Z)(y,a,i,!1,null,"0d6ca6f5",null),w=k.exports},7788:function(t,s,e){t.exports=e.p+"img/vip.9270a622.svg"},2564:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIwAAACMCAYAAACuwEE+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEk0AABJNAfOXxKcAAAFqSURBVHhe7cixDcAwAMOw/P90mgPkoTsFcNF5XfghJyw5YckJS05YcsKSE5acsOSEJScsOWHJCUtOWHLCkhOWnLDkhCUnLDlhyQlLTlhywpITlpyw5IQlJyw5YckJS05YcsKSE5acsOSEJScsOWHJCUtOWHLCkhOWnLDkhCUnLDlhyQlLTlhywpITlpyw5IQlJyw5YckJS05YcsKSE5acsOSEJScsOWHJCUtOWHLCkhOWnLDkhCUnLDlhyQlLTlhywpITlpyw5IQlJyw5YckJS05YcsKSE5acsOSEJScsOWHJCUtOWHLCkhOWnLDkhCUnLDlhyQlLTlhywpITlpyw5IQlJyw5YckJS05YcsKSE5acsOSEJScsOWHJCUtOWHLCkhOWnLDkhCUnLDlhyQlLTlhywpITlpyw5IQlJyw5YckJS05YcsKSE5acsOSEJScsOWHJCUtOWHLCkhOWnLDkhCUnLDlhyQnh3A82J0fl/sMqgQAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=357.4047a943.js.map
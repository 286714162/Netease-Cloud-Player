"use strict";(self["webpackChunknetease_cloud_player"]=self["webpackChunknetease_cloud_player"]||[]).push([[271],{6271:function(t,s,a){a.r(s),a.d(s,{default:function(){return C}});var l=function(){var t=this,s=t.$createElement,l=t._self._c||s;return l("div",{attrs:{id:"playlist"}},[l("div",{ref:"playlist-banner",staticClass:"playlist-banner"},[l("div",{staticClass:"playlist-banner-content"},[l("div",{staticClass:"playlist-banner-poster"},[l("img",{attrs:{src:t.playlistPicUrl,alt:""}})]),l("div",{staticClass:"playlist-banner-desc"},[l("h2",[t._v(t._s(t.playlistTags))]),l("h1",{staticClass:"playlist-episodeTitle"},[l("span",[t._v(t._s(t.playlistName))])]),l("a",{attrs:{draggable:"false",href:"#"}},[l("span",[t._v(t._s(t.playlistCreatorName))])])]),l("div")])]),l("div",{staticClass:"playlist-content"},[l("div",{ref:"playlist-content-mask",staticClass:"playlist-content-mask"}),l("div",{staticClass:"playlist-content-main"},[l("div",{staticClass:"playlist-content-action"},[l("div",{staticClass:"playlist-content-action-content"},[l("button",{attrs:{"aria-label":"播放全部","data-btn-play":""},on:{click:t.actionPlayAll}},[l("svg",{staticClass:"Svg-sc-1bi12j5-0 jgfuCe",attrs:{role:"img",height:"28",width:"28",viewBox:"0 0 24 24"}},[l("path",{attrs:{d:"M7.05 3.606l13.49 7.788a.7.7 0 010 1.212L7.05 20.394A.7.7 0 016 19.788V4.212a.7.7 0 011.05-.606z"}})])]),l("button",{attrs:{"aria-label":"添加至播放队列","data-btn-add":""}},[l("svg",{staticClass:"Svg-sc-1bi12j5-0 jgfuCe",attrs:{role:"img",height:"12",width:"12","aria-hidden":"true",viewBox:"0 0 16 16"}},[l("path",{attrs:{d:"M15.25 8a.75.75 0 01-.75.75H8.75v5.75a.75.75 0 01-1.5 0V8.75H1.5a.75.75 0 010-1.5h5.75V1.5a.75.75 0 011.5 0v5.75h5.75a.75.75 0 01.75.75z"}})])])])]),l("div",{ref:"playlist-table-title",staticClass:"playlist-table-title"},[l("div",[t._v("#")]),l("div",[t._v("标题")]),l("div",[t._v("专辑")]),l("div",[t._v("发布时间")]),l("div",[t._v("时长")])]),l("ul",{staticClass:"playlist-table-content"},t._l(t.curPlaylist,(function(s,e){return l("li",{key:"playlist"+e,staticClass:"playlist-table-row",on:{click:function(a){return t.playlistSelect(s)}}},[l("div",{staticClass:"table-cell-index"},[l("span",{staticClass:"playlist-table-index"},[t._v(" "+t._s(e+1))]),l("span",{staticClass:"playlist-table-icon"},[l("svg",{staticClass:"UIBT7E6ZYMcSDl1KL62g",attrs:{height:"32",role:"img",width:"32",viewBox:"0 0 24 24"}},[l("polygon",{attrs:{points:"21.57 12 5.98 3 5.98 21 21.57 12",fill:"currentColor"}})])])]),l("div",{staticClass:"table-cell-desc"},[l("img",{staticClass:"table-cell-desc-pic",attrs:{"data-pic-src":s.al.picUrl,alt:""}}),l("div",[l("div",[l("span",{staticClass:"table-cell-ellipsis",attrs:{title:s.name}},[t._v(" "+t._s(s.name))]),[0,8].includes(s.fee)?t._e():l("img",{staticClass:"table-cell-desc-vip",attrs:{src:a(7788),alt:""}})]),l("div",{staticClass:"table-cell-ellipsis",attrs:{title:t.getName(s.ar)}},[t._v(" "+t._s(t.getName(s.ar))+" ")])])]),l("div",{staticClass:"table-cell-ellipsis"},[l("div",{staticClass:"table-cell-ellipsis",staticStyle:{display:"block"},attrs:{title:s.al.name}},[t._v(" "+t._s(s.al.name)+" ")])]),l("div",[t._v(t._s(t.getPubTime(s.publishTime)))]),l("div",[t._v(t._s(t.getSongDt(s.dt)))])])})),0)])])])},e=[],i=a(7133),n=a.n(i),r=a(2536),c=a(4665);let o,u,d,p,y;const g=()=>{const t=document.documentElement.scrollTop;let s,a;y>t?(s=1-(y-t)/y,a=`rgba(24,24,24,${s})`):(s=1,a="rgba(24,24,24,1)"),d.style.opacity=s,p.style.backgroundColor=a};var v={name:"DetailPlayList",data(){return{curPlaylist:[],curPlaylistInfo:{}}},methods:{...(0,c.nv)(["getPlaylistDetail","getSongDetail"]),...(0,c.OI)(["setCurPlaylistColor","setCurSongid","setLoading","pushPlayQueue"]),playlistSelect(t){localStorage.setItem("songid",t.id),this.setCurSongid(t.id)},actionPlayAll(){this.pushPlayQueue(null),this.pushPlayQueue(this.curPlaylist),this.setCurSongid(this.curPlaylist[0].id)},getPicMainColor(t){(0,r.NT)(t).then((t=>{this.setCurPlaylistColor(t)}))},lazyLoadimg(){const t=new IntersectionObserver((s=>{s.forEach((s=>{s.intersectionRatio>0&&(s.target.src=s.target.getAttribute("data-pic-src"),t.unobserve(s.target))}))}));this.$nextTick((function(){document.querySelectorAll(".table-cell-desc-pic").forEach((s=>t.observe(s)))}))}},mounted(){const{id:t}=this.$route.query;this.setLoading(!0),this.getPlaylistDetail(t).then((t=>{this.curPlaylistInfo=t;const s=t.trackIds.map((t=>t.id)).toString();this.getSongDetail(s).then((t=>{this.curPlaylist=t.songs,this.setLoading(!1),this.lazyLoadimg()}))})),o=this.$refs["playlist-content-mask"],u=this.$refs["playlist-banner"],d=this.$parent.$refs["main-header-mask"],p=this.$refs["playlist-table-title"],y=u.clientHeight+o.clientHeight-68,document.addEventListener("scroll",g)},computed:{getName(){return function(t){return(0,r.cx)(t)}},getPubTime(){return function(t){return t?n()(t).format("YYYY"):"未知"}},getSongDt(){return function(t){const s=n().duration(t);return`${s.minutes()<10?`0${s.minutes()}`:s.minutes()}:${s.seconds()<10?`0${s.seconds()}`:s.seconds()}`}},playlistName(){return this.curPlaylistInfo.name},playlistPicUrl(){const t=this.curPlaylistInfo.coverImgUrl;return t&&this.getPicMainColor(t),t},playlistCreatorName(){return this.curPlaylistInfo.creator?.nickname??""},playlistTags(){return this.curPlaylistInfo.tags?this.curPlaylistInfo.tags.join(" • "):""}},beforeRouteLeave(t,s,a){this.setCurPlaylistColor("0, 0, 0, 1"),document.removeEventListener("scroll",g),a()}},h=v,m=a(1001),b=(0,m.Z)(h,l,e,!1,null,"6f644861",null),C=b.exports},7788:function(t,s,a){t.exports=a.p+"img/vip.9270a622.svg"}}]);
//# sourceMappingURL=271.e20f1218.js.map
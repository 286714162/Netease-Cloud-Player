(self["webpackChunknetease_cloud_player"]=self["webpackChunknetease_cloud_player"]||[]).push([[271],{6271:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return C}});var a,s,l,n,r,c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"playlist"}},[a("div",{ref:"playlist-banner",staticClass:"playlist-banner"},[a("div",{staticClass:"playlist-banner-content"},[a("div",{staticClass:"playlist-banner-poster"},[a("img",{attrs:{src:t.playlistPicUrl,alt:""}})]),a("div",{staticClass:"playlist-banner-desc"},[a("h2",[t._v(t._s(t.playlistTags))]),a("h1",{staticClass:"playlist-episodeTitle"},[a("span",[t._v(t._s(t.playlistName))])]),a("a",{attrs:{draggable:"false",href:"#"}},[a("span",[t._v(t._s(t.playlistCreatorName))])])]),a("div")])]),a("div",{staticClass:"playlist-content"},[a("div",{ref:"playlist-content-mask",staticClass:"playlist-content-mask"}),a("div",{staticClass:"playlist-content-main"},[a("div",{staticClass:"playlist-content-action"},[a("div",{staticClass:"playlist-content-action-content"},[a("button",{attrs:{"aria-label":"播放全部","data-btn-play":""},on:{click:t.actionPlayAll}},[a("svg",{staticClass:"Svg-sc-1bi12j5-0 jgfuCe",attrs:{role:"img",height:"28",width:"28",viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M7.05 3.606l13.49 7.788a.7.7 0 010 1.212L7.05 20.394A.7.7 0 016 19.788V4.212a.7.7 0 011.05-.606z"}})])]),a("button",{attrs:{"aria-label":"添加至播放队列","data-btn-add":""}},[a("svg",{staticClass:"Svg-sc-1bi12j5-0 jgfuCe",attrs:{role:"img",height:"12",width:"12","aria-hidden":"true",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M15.25 8a.75.75 0 01-.75.75H8.75v5.75a.75.75 0 01-1.5 0V8.75H1.5a.75.75 0 010-1.5h5.75V1.5a.75.75 0 011.5 0v5.75h5.75a.75.75 0 01.75.75z"}})])])])]),a("div",{ref:"playlist-table-title",staticClass:"playlist-table-title"},[a("div",[t._v("#")]),a("div",[t._v("标题")]),a("div",[t._v("专辑")]),a("div",[t._v("发布时间")]),a("div",[t._v("时长")])]),a("ul",{staticClass:"playlist-table-content"},t._l(t.curPlaylist,(function(e,s){return a("li",{key:"playlist"+s,staticClass:"playlist-table-row",on:{click:function(i){return t.playlistSelect(e)}}},[a("div",{staticClass:"table-cell-index"},[a("span",{staticClass:"playlist-table-index"},[t._v(" "+t._s(s+1))]),a("span",{staticClass:"playlist-table-icon"},[a("svg",{staticClass:"UIBT7E6ZYMcSDl1KL62g",attrs:{height:"32",role:"img",width:"32",viewBox:"0 0 24 24"}},[a("polygon",{attrs:{points:"21.57 12 5.98 3 5.98 21 21.57 12",fill:"currentColor"}})])])]),a("div",{staticClass:"table-cell-desc"},[a("img",{staticClass:"table-cell-desc-pic",attrs:{"data-pic-src":e.al.picUrl,alt:""}}),a("div",[a("div",[a("span",{staticClass:"table-cell-ellipsis",attrs:{title:e.name}},[t._v(" "+t._s(e.name))]),[0,8].includes(e.fee)?t._e():a("img",{staticClass:"table-cell-desc-vip",attrs:{src:i(7788),alt:""}})]),a("div",{staticClass:"table-cell-ellipsis",attrs:{title:t.getName(e.ar)}},[t._v(" "+t._s(t.getName(e.ar))+" ")])])]),a("div",{staticClass:"table-cell-ellipsis"},[a("div",{staticClass:"table-cell-ellipsis",staticStyle:{display:"block"},attrs:{title:e.al.name}},[t._v(" "+t._s(e.al.name)+" ")])]),a("div",[t._v(t._s(t.getPubTime(e.publishTime)))]),a("div",[t._v(t._s(t.getSongDt(e.dt)))])])})),0)])])])},o=[],u=i(3019),d=(i(1539),i(4747),i(9714),i(1249),i(2222),i(8309),i(9600),i(7133)),p=i.n(d),v=i(2536),y=i(4665),f=function(){var t,e,i=document.documentElement.scrollTop;r>i?(t=1-(r-i)/r,e="rgba(24,24,24,".concat(t,")")):(t=1,e="rgba(24,24,24,".concat(1,")")),l.style.opacity=t,n.style.backgroundColor=e},g={name:"DetailPlayList",data:function(){return{curPlaylist:[],curPlaylistInfo:{}}},methods:(0,u.Z)((0,u.Z)((0,u.Z)({},(0,y.nv)(["getPlaylistDetail","getSongDetail"])),(0,y.OI)(["setCurPlaylistColor","setCurSongid","setLoading","pushPlayQueue"])),{},{playlistSelect:function(t){localStorage.setItem("songid",t.id),this.setCurSongid(t.id)},actionPlayAll:function(){this.pushPlayQueue(null),this.pushPlayQueue(this.curPlaylist),this.setCurSongid(this.curPlaylist[0].id)},getPicMainColor:function(t){var e=this;(0,v.NT)(t).then((function(t){e.setCurPlaylistColor(t)}))},lazyLoadimg:function(){var t=new IntersectionObserver((function(e){e.forEach((function(e){e.intersectionRatio>0&&(e.target.src=e.target.getAttribute("data-pic-src"),t.unobserve(e.target))}))}));this.$nextTick((function(){document.querySelectorAll(".table-cell-desc-pic").forEach((function(e){return t.observe(e)}))}))}}),mounted:function(){var t=this,e=this.$route.query.id;this.setLoading(!0),this.getPlaylistDetail(e).then((function(e){t.curPlaylistInfo=e;var i=e.trackIds.map((function(t){return t.id})).toString();t.getSongDetail(i).then((function(e){t.curPlaylist=e.songs,t.setLoading(!1),t.lazyLoadimg()}))})),a=this.$refs["playlist-content-mask"],s=this.$refs["playlist-banner"],l=this.$parent.$refs["main-header-mask"],n=this.$refs["playlist-table-title"],r=s.clientHeight+a.clientHeight-68,document.addEventListener("scroll",f)},computed:{getName:function(){return function(t){return(0,v.cx)(t)}},getPubTime:function(){return function(t){return t?p()(t).format("YYYY"):"未知"}},getSongDt:function(){return function(t){var e=p().duration(t);return"".concat(e.minutes()<10?"0".concat(e.minutes()):e.minutes(),":").concat(e.seconds()<10?"0".concat(e.seconds()):e.seconds())}},playlistName:function(){return this.curPlaylistInfo.name},playlistPicUrl:function(){var t=this.curPlaylistInfo.coverImgUrl;return t&&this.getPicMainColor(t),t},playlistCreatorName:function(){var t,e;return null!==(t=null===(e=this.curPlaylistInfo.creator)||void 0===e?void 0:e.nickname)&&void 0!==t?t:""},playlistTags:function(){return this.curPlaylistInfo.tags?this.curPlaylistInfo.tags.join(" • "):""}},beforeRouteLeave:function(t,e,i){this.setCurPlaylistColor("0, 0, 0, 1"),document.removeEventListener("scroll",f),i()}},b=g,h=i(1001),m=(0,h.Z)(b,c,o,!1,null,"6f644861",null),C=m.exports},9337:function(t,e,i){var a=i(2109),s=i(9781),l=i(3887),n=i(5656),r=i(1236),c=i(6135);a({target:"Object",stat:!0,sham:!s},{getOwnPropertyDescriptors:function(t){var e,i,a=n(t),s=r.f,o=l(a),u={},d=0;while(o.length>d)i=s(a,e=o[d++]),void 0!==i&&c(u,e,i);return u}})},7788:function(t,e,i){"use strict";t.exports=i.p+"img/vip.9270a622.svg"},3019:function(t,e,i){"use strict";i.d(e,{Z:function(){return l}});i(7941),i(2526),i(7327),i(1539),i(5003),i(4747),i(9337);function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){a(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}}}]);
//# sourceMappingURL=271-legacy.021ed377.js.map
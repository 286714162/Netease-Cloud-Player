(self["webpackChunknetease_cloud_player"]=self["webpackChunknetease_cloud_player"]||[]).push([[357],{9357:function(t,s,e){"use strict";e.r(s),e.d(s,{default:function(){return k}});var a=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("main",{attrs:{id:"artist"}},[a("div",{ref:"under-poster",staticClass:"under-poster",style:{"--poster-url":t.artistnPoster}}),a("div",{staticClass:"under-poster-mask"}),a("div",{ref:"under-poster-mask-trans",staticClass:"under-poster-mask-trans"}),a("div",{staticClass:"artist-info"},[a("div",{staticClass:"artist-info-spacing"},[a("div",{staticClass:"artist-info-main"},[a("span",{staticClass:"artist-info-type"},[t._v("入住艺人")]),a("span",{staticClass:"artist-info-name"},[t._v(t._s(t.artistnName))]),a("span",{staticClass:"artist-info-follower"},[t._v("每月有 1,148,445 名听众")])])])]),a("div",{staticClass:"artist-playlist"},[a("div",{staticClass:"artist-playlist-main"},[a("section",{staticClass:"section-hot-song"},[a("h2",[t._v("热门")]),a("ul",{staticClass:"hot-song-table"},t._l(t.tableData.hotSongs,(function(s,i){return a("li",{key:"detailArtist-"+i,staticClass:"table-row"},[a("div",{staticClass:"table-cell-index"},[a("span",{staticClass:"playlist-table-index"},[t._v(" "+t._s(i+1))]),a("span",{staticClass:"playlist-table-icon"},[a("svg",{staticClass:"icon-play",attrs:{height:"32",role:"img",width:"32",viewBox:"0 0 24 24"}},[a("polygon",{attrs:{points:"21.57 12 5.98 3 5.98 21 21.57 12",fill:"currentColor"}})])])]),a("div",{staticClass:"table-cell-desc"},[a("img",{staticClass:"table-cell-desc-pic",attrs:{src:s.al.picUrl,alt:""}}),a("div",{staticClass:"table-cell-desc-info"},[a("div",{staticClass:"table-desc-name"},[a("span",{staticClass:"table-cell-ellipsis",attrs:{title:s.name}},[t._v(" "+t._s(s.name))]),[0,8].includes(s.fee)?t._e():a("img",{staticClass:"table-cell-desc-vip",attrs:{src:e(7788),alt:""}})])])]),a("div",{staticClass:"table-cell-ellipsis"},[a("div",{staticClass:"table-cell-ellipsis",staticStyle:{display:"block"},attrs:{title:s.al.name}},[t._v(" "+t._s(s.al.name)+" ")])]),a("div",[t._v(t._s(t.getSongDt(s.dt)))])])})),0),a("a",{staticClass:"more-hotSongs",attrs:{href:"#"}},[t._v("查看更多")])]),a("SectionList",{attrs:{title:"专辑",listData:t.tableData.hotAlbums}}),a("SectionList",{attrs:{title:"MV",listData:t.tableData.mvs}}),a("SectionList",{attrs:{title:"粉丝也喜欢",round:!0,listData:t.tableData.simi}})],1)])])},i=[],n=e(6198),r=e(3019),o=(e(8975),e(6977),e(1539),e(8783),e(3948),e(4747),e(8309),e(2222),e(7133)),c=e.n(o),l=e(2536),u=e(4665),d=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("section",{staticClass:"section-common",style:{"--shape-round":t.$props.round?"50%":"4px"}},[a("div",{staticClass:"section-common-title"},[a("h2",[t._v(t._s(t.getTitle))]),t.$props.listData.length>6?a("span",[t._v("查看更多")]):t._e()]),a("ul",{staticClass:"section-row"},t._l(t.getListData,(function(s,i){return a("li",{key:t.getTitle+"-"+i,ref:"lazyload-img",refInFor:!0,staticClass:"section-column"},[a("div",{staticClass:"section-column-spacing"},[a("img",{ref:"lazyload-img",refInFor:!0,staticClass:"column-poster",attrs:{src:e(2564),"data-pic-src":s.picUrl,alt:""}}),a("div",{staticClass:"column-info"},[a("div",{staticClass:"column-name"},[t._v(" "+t._s(s.name)+" ")]),a("div",{staticClass:"column-desc"},[t._v(" "+t._s(s.desc)+" ")])])])])})),0)])},f=[],p=(e(7941),e(7042),{name:"SectionList",data:function(){return{columnCount:6}},props:["title","listData","round"],mounted:function(){var t=this,s={"(min-width: 1068px)":6,"(min-width: 968px)":5,"(min-width: 728px)":4,"(min-width: 528px)":3,"(min-width: 0)":2},e=function(e){!0===e.matches?t.columnCount=s[e.media]:t.columnCount=s[e.media]-1},a=!1;Object.keys(s).reverse().forEach((function(i){var n=window.matchMedia(i);n.matches||a||(t.columnCount=s[i]-1,a=!0),n.addEventListener("change",e)}))},methods:{lazyLoadimg:function(){var t=new IntersectionObserver((function(s){s.forEach((function(s){if(s.intersectionRatio>0){var e=.2,a=new Image;a.setAttribute("crossOrigin","Anonymous"),a.src=s.target.getAttribute("data-pic-src"),console.dir(a),a.onload=function(){var t,i,n=a.width,r=a.height;n/r>1?t=i=r:n/r<1?t=i=n:(t=n,i=r);var o=document.createElement("canvas"),c=o.getContext("2d");o.width=t*e,o.height=i*e,c.drawImage(a,0,0,n,r,0,0,t*e,i*e),s.target.src=o.toDataURL("image/jpg")},t.unobserve(s.target)}}))}));this.$nextTick((function(){this.$refs["lazyload-img"].forEach((function(s){s&&t.observe(s)}))}))}},computed:{getTitle:function(){return this.$props.title||""},getListData:function(){return this.$props.listData&&this.$props.listData.length>0?(this.lazyLoadimg(),this.$props.listData.slice(0,this.columnCount)):[]}}}),h=p,m=e(1001),v=(0,m.Z)(h,d,f,!1,null,"5a1966ee",null),g=v.exports,y={artistPlaylistRef:void 0,headerMaskRef:void 0,MaskTransRef:void 0,underPosterRef:void 0},C=function(){var t,s=y.artistPlaylistRef.offsetTop-68,e=document.documentElement.scrollTop;s<0||(t=s>e?1-(s-e)/s:1,t=t.toFixed(3),y.underPosterRef.style.transform="scale(".concat(1.05-.05*t,")"),y.MaskTransRef.style.opacity=1.5*t>1?1:1.5*t,y.headerMaskRef.style.opacity=t)},A=(0,l.P2)(C,1e3/60),w={name:"DetailArtist",components:{SectionList:g},data:function(){return(0,r.Z)((0,r.Z)((0,r.Z)({},(0,u.OI)(["setLoading","setCurPlaylistColor"])),(0,u.nv)(["getArtistDetail","getArtistFans","getArtistSong","getArtistALBUM","getArtistMV","getArtistSimi"])),{},{tableData:{hotSongs:[],hotAlbums:[],mvs:[],simi:[]},artistInfo:{}})},mounted:function(){var t=this;y.artistPlaylistRef=document.querySelector(".artist-playlist"),y.headerMaskRef=this.$parent.$refs["main-header-mask"],y.MaskTransRef=this.$refs["under-poster-mask-trans"],y.underPosterRef=this.$refs["under-poster"],this.setLoading(!0);var s=this.$route.query.id;this.getArtistDetail(s).then(function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(a){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,l.NT)(a.data.artist.cover);case 2:i=e.sent,t.setCurPlaylistColor(i),t.$nextTick((function(){Promise.all([t.getArtistSimi(s),t.getArtistSong(s),t.getArtistALBUM(s),t.getArtistMV(s)]).then((function(s){t.artistInfo=a.data,s.forEach((function(s){t.tableData[s.type]=s.data})),t.setLoading(!1)}))}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),document.addEventListener("scroll",A)},computed:{artistType:function(){var t;return null!==(t=this.artistInfo)&&void 0!==t&&t.artist?this.artistInfo.artist.identifyTag[0]:""},artistnName:function(){var t;return(null===(t=this.artistInfo.artist)||void 0===t?void 0:t.name)||""},artistnPoster:function(){var t;return"url(".concat((null===(t=this.artistInfo.artist)||void 0===t?void 0:t.cover)||"",")")},getSongDt:function(){return function(t){var s=c().duration(t);return"".concat(s.minutes()<10?"0".concat(s.minutes()):s.minutes(),":").concat(s.seconds()<10?"0".concat(s.seconds()):s.seconds())}}},beforeRouteLeave:function(t,s,e){document.removeEventListener("scroll",A),this.setCurPlaylistColor("0, 0, 0, 1"),this.setLoading(!0),this.$nextTick((function(){e()}))}},b=w,O=(0,m.Z)(b,a,i,!1,null,"0d6ca6f5",null),k=O.exports},9337:function(t,s,e){var a=e(2109),i=e(9781),n=e(3887),r=e(5656),o=e(1236),c=e(6135);a({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var s,e,a=r(t),i=o.f,l=n(a),u={},d=0;while(l.length>d)e=i(a,s=l[d++]),void 0!==e&&c(u,s,e);return u}})},7788:function(t,s,e){"use strict";t.exports=e.p+"img/vip.9270a622.svg"},2564:function(t){"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIwAAACMCAYAAACuwEE+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEk0AABJNAfOXxKcAAAFqSURBVHhe7cixDcAwAMOw/P90mgPkoTsFcNF5XfghJyw5YckJS05YcsKSE5acsOSEJScsOWHJCUtOWHLCkhOWnLDkhCUnLDlhyQlLTlhywpITlpyw5IQlJyw5YckJS05YcsKSE5acsOSEJScsOWHJCUtOWHLCkhOWnLDkhCUnLDlhyQlLTlhywpITlpyw5IQlJyw5YckJS05YcsKSE5acsOSEJScsOWHJCUtOWHLCkhOWnLDkhCUnLDlhyQlLTlhywpITlpyw5IQlJyw5YckJS05YcsKSE5acsOSEJScsOWHJCUtOWHLCkhOWnLDkhCUnLDlhyQlLTlhywpITlpyw5IQlJyw5YckJS05YcsKSE5acsOSEJScsOWHJCUtOWHLCkhOWnLDkhCUnLDlhyQlLTlhywpITlpyw5IQlJyw5YckJS05YcsKSE5acsOSEJScsOWHJCUtOWHLCkhOWnLDkhCUnLDlhyQnh3A82J0fl/sMqgQAAAABJRU5ErkJggg=="},3019:function(t,s,e){"use strict";e.d(s,{Z:function(){return n}});e(7941),e(2526),e(7327),e(1539),e(5003),e(4747),e(9337);function a(t,s,e){return s in t?Object.defineProperty(t,s,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[s]=e,t}function i(t,s){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter((function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),e.push.apply(e,a)}return e}function n(t){for(var s=1;s<arguments.length;s++){var e=null!=arguments[s]?arguments[s]:{};s%2?i(Object(e),!0).forEach((function(s){a(t,s,e[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s))}))}return t}}}]);
//# sourceMappingURL=357-legacy.0458e3e1.js.map